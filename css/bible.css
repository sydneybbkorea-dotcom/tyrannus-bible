/* ── CENTER: Bible Text ── */
#biblePane {
  flex:1; display:flex; flex-direction:column; overflow:hidden; background:var(--bg); min-width:0;
}
/* ── Bible Tab Bar (physical folder tab style) ── */
#bibleTabBar {
  display:flex; align-items:flex-end; background:var(--bg2); 
  flex-shrink:0; min-height:36px; gap:0;
  padding:6px 8px 0;
  border-bottom:none;
  overflow:hidden;
}
#bibleTabList { display:flex; align-items:flex-end; flex:1; min-width:0; gap:0; overflow:hidden; }
.btab {
  display:flex; align-items:center; gap:5px; padding:7px 8px 8px 12px; font-size:11.5px;
  color:var(--text3); cursor:pointer; white-space:nowrap;
  transition:all .12s; flex:1 1 0; min-width:40px; max-width:180px;
  user-select:none; overflow:hidden;
  border-radius:var(--radius) var(--radius) 0 0;
  background:var(--bg3);
  border:1px solid var(--border);
  border-bottom:none;
  position:relative;
  margin-right:-1px;
  z-index:0;
}
.btab:hover { background:var(--bg); color:var(--text2); z-index:1; }
.btab.btab-active {
  background:var(--bg); color:var(--text);
  border-color:var(--border);
  z-index:2;
  padding-bottom:8px;
  margin-bottom:-1px;
}
.btab-title { overflow:hidden; text-overflow:ellipsis; white-space:nowrap; flex:1; min-width:0 }
.btab-close {
  font-size:9px; color:var(--text3); width:16px; height:16px;
  display:flex; align-items:center; justify-content:center;
  border-radius:4px; transition:all .1s; flex-shrink:0; opacity:0;
}
.btab:hover .btab-close, .btab.btab-active .btab-close { opacity:.5 }
.btab-close:hover { background:var(--bg4); color:var(--text); opacity:1 !important }
#bibleTabAdd {
  width:26px; height:26px; display:flex; align-items:center; justify-content:center;
  font-size:10px; color:var(--text3); background:transparent; border:none;
  cursor:pointer; flex-shrink:0; border-radius:6px 6px 0 0; margin-left:4px;
  transition:all .1s;
}
#bibleTabAdd:hover { background:var(--bg3); color:var(--gold) }

/* Bible scroll top border — connects with active tab */

/* ── 폴더/노트 컨텍스트 메뉴 ── */
.fn-ctx {
  position:fixed; z-index:9999; min-width:160px;
  background:var(--bg2); border:1px solid var(--border2);
  border-radius:var(--radius); box-shadow:var(--shadow);
  padding:4px 0; overflow:hidden;
  backdrop-filter:blur(12px);
}
.fn-ctx-item {
  padding:9px 14px; font-size:12px; color:var(--text);
  cursor:pointer; display:flex; align-items:center; gap:8px;
  transition:background .1s;
}
.fn-ctx-item:hover { background:var(--bg4) }
.fn-ctx-item i { width:14px; text-align:center; font-size:11px; color:var(--text3) }
.fn-ctx-danger { color:var(--red) }
.fn-ctx-danger i { color:var(--red) }
.fn-ctx-danger:hover { background:rgba(176,48,48,.12) }

/* ── Read Mode — 하이라이트/메모만 숨김 ── */
body.read-mode mark { background:transparent !important; border-bottom:none !important; color:inherit; cursor:text }
body.read-mode .str-code { display:none }
body.read-mode .vindic { display:none }

/* ── 영한 대조 ── */
.vrow-parallel {
  display:flex; gap:0;
}
.vrow-parallel .vtxt-kr { flex:1; min-width:0; }
.vrow-parallel .vtxt-en-side {
  flex:1; min-width:0; padding:3px 6px;
  font-family:'KoPubWorld Batang','Georgia',serif; font-size:17px;
  color:var(--text); line-height:1.85; letter-spacing:0.01em;
}
/* 영어 본문 내부: 색상 클래스 무력화, 검정색만 */
.vtxt-en-side .dg, .vtxt-en-side span.dg,
.vtxt-en-side b.dg, .vtxt-en-side b.dg.semi { color:inherit !important }
.vtxt-en-side b, .vtxt-en-side strong { font-weight:700; color:inherit }
.vtxt-en-side i, .vtxt-en-side em { font-style:italic; color:inherit }

/* 영어 구절번호: 한국어 구절번호와 동일한 골드색 */
.vrow-parallel .vtxt-en-side .en-vnum {
  font-family:'JetBrains Mono',monospace; font-size:10px;
  color:var(--gold); opacity:.75; min-width:22px; display:inline-block;
  margin-right:4px; vertical-align:top; margin-top:5px;
}
/* 좁은 화면 — 아래위 대조 */
.vtxt-en-below {
  font-family:'KoPubWorld Batang','Georgia',serif; font-size:15.5px;
  color:var(--text); line-height:1.9; margin-top:5px;
  letter-spacing:0.01em; padding-left:0;
}
.vtxt-en-below .dg, .vtxt-en-below b.dg { color:inherit !important }

/* ── 상하 대조 공통 스타일 ──────────────────────────────────
   flex-wrap으로 .vnum+.vtxt-kr은 한 줄, .vtxt-en-side는 다음 줄.
   .vnum은 구절번호(22px), .vtxt-kr이 나머지 채움,
   .vtxt-en-side는 width:100%로 줄바꿈하여 아래 배치.
──────────────────────────────────────────────────────────── */

/* 좁은 화면(900px 미만) */
@media (max-width:899px) {
  .vrow-parallel { flex-wrap:wrap; gap:0; }
  .vrow-parallel .vtxt-en-side {
    width:100%; padding:0 0 0 28px;
    font-size:15.5px; line-height:1.8; color:var(--text2);
    margin-top:1px; margin-bottom:4px; flex:none;
  }
  .vrow-parallel .vtxt-en-side .en-vnum { display:none; }
  .vrow-parallel .vindic { position:absolute; right:4px; top:4px; }
}

/* 패널 열린 상태 — 강제 상하 대조 (한글 위, 영어 아래)
   패널이 열리면 본문 영역이 좁아지므로 반드시 상하 배치 */
body.panel-open .vrow-parallel { flex-wrap:wrap !important; gap:0 !important; }
body.panel-open .vrow-parallel .vtxt-kr { flex:1; min-width:0; margin-bottom:0; }
body.panel-open .vrow-parallel .vtxt-en-side {
  width:100% !important; flex:none !important; padding:0 0 0 28px;
  font-size:15.5px; line-height:1.8; color:var(--text2);
  margin-top:1px; margin-bottom:4px;
}
body.panel-open .vrow-parallel .vtxt-en-side .en-vnum { display:none; }
body.panel-open .vrow-parallel .vindic { position:absolute; right:4px; top:4px; }
/* 라이트 테마 영어 텍스트 가독성 */
[data-theme="light"] .vtxt-en-side { color:var(--text2) }
[data-theme="light"] .vtxt-en-below { color:var(--text2) }
#bibleScroll { flex:1; overflow-y:auto; padding:24px 28px 48px; border-top:1px solid var(--border); }
.ch-head { text-align:center; margin-bottom:20px; padding-bottom:16px; border-bottom:1px solid var(--border) }
/* 장 제목: 고딕체 (UI 요소) — 성경 본문과 구분 */
.ch-head h1 { font-family:'KoPubWorld Dotum','Noto Sans KR',sans-serif; font-size:26px; font-weight:700; color:var(--accent2); margin-bottom:6px; letter-spacing:0.02em }
.ch-head p { font-size:11px; color:var(--text3); letter-spacing:1.5px; text-transform:uppercase }
.vrow {
  display:flex; gap:6px; padding:2px 8px; border-radius:var(--radius); margin-bottom:0;
  cursor:pointer; transition:background .12s; position:relative;
}
.vrow:hover { background:var(--bg3) }
.vrow.vsel { background:var(--accent-sel) !important; outline:1px solid rgba(80,140,232,.25); border-radius:var(--radius) }
.vnum {
  font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--gold);
  min-width:22px; margin-top:4px; margin-right:4px; text-align:right; flex-shrink:0; opacity:.75;
}
[contenteditable][data-placeholder]:empty:before {
  content: attr(data-placeholder);
  color: var(--text3);
  pointer-events: none;
}
.vtxt { font-family:'KoPubWorld Batang','Noto Serif KR',serif; font-size:17px; font-weight:500; color:var(--text); flex:1; letter-spacing:0.02em; line-height:1.85; user-select:text; word-break:keep-all }
/* 사이트 스타일 그대로: 돋움체(font-g) 클래스 */
/* ── 표준킹제임스성경 번역 원칙에 따른 폰트 표기 ──────────────────
   [일러두기 - 하나님과 마귀를 부각한 표기들]
   
   1) 기본체(바탕) + 진하기  b:not(.dg)
      정관사(the)가 있는 명사가 하나님 또는 사탄을 나타낼 때
      예) 마귀(the devil), 반석(the rock), 아들(the Son), 빛(the light)
   
   2) 돋움체 + 얇게  span.dg  (font-g font-light)
      앞 철자만 대문자로 표기한 명사가 하나님/사탄을 나타낼 때
      예) 마귀(Devil), 반석(Rock), 아들(Son), 빛(Light)
   
   3) 돋움체 + 보통  b.dg.semi  (font-g font-semibold)
      앞 철자만 대문자 + 정관사(the)가 있는 명사
      예) 마귀(the Devil), 반석(the Rock), 아들(the Son)
   
   4) 돋움체 + 진하기  b.dg  (font-g font-black)
      모든 철자를 대문자(SUPER CAPS)로 표기한 단어
      예) 만왕의 왕(KING OF KINGS), 주(the LORD), 하나님(the GOD)
   
   이탤릭체  i
      원어에 없는 보완 설명 단어. 영어의 특성상 대명사를 실명사로
      받아서 사용하는 경우에도 이탤릭체로 표기.
─────────────────────────────────────────────────────────────── */

/* 돋움체 공통 기반 */
.vtxt .dg {
  font-family:'KoPubWorld Dotum','Noto Sans KR',sans-serif;
  font-style: normal;
}

/* 2) 돋움체 + 얇게 (Devil, Rock, Son 등 - 대문자 명사, 정관사 없음) */
.vtxt span.dg {
  font-weight: 300;
  letter-spacing: 0.01em;
  -webkit-text-stroke: 0.5px transparent;
}

/* 3) 돋움체 + 보통 (the Devil, the Rock 등 - 정관사+대문자 명사) */
.vtxt b.dg.semi {
  font-weight: 500;
}

/* 4) 돋움체 + 진하기 (SUPER CAPS: LORD, GOD, BRANCH 등) */
.vtxt b.dg {
  font-weight: 700;
  letter-spacing: 0.02em;
}

/* italic: 이탤릭체 (원어에 없는 보완 단어 - 기울임) */
.vtxt i {
  font-family:'KoPubWorld Batang','Noto Serif KR',serif;
  font-style: italic;
  font-weight: 400;
  font-size: 1em;
  color: inherit;
}

/* 1) 기본체(바탕) + 진하기 (the devil, the rock 등 - 정관사+소문자 명사) */
.vtxt b:not(.dg) {
  font-family:'KoPubWorld Batang','Noto Serif KR',serif;
  font-weight: 700;
}
/* ── 구절 행 배경 하이라이트 (은은한 배경) ── */
.vrow.hl-row-y { background:rgba(250,204,21,.12) !important }
.vrow.hl-row-o { background:rgba(251,146,60,.12) !important }
.vrow.hl-row-g { background:rgba(52,211,153,.10) !important }
.vrow.hl-row-b { background:rgba(96,165,250,.12) !important }
.vrow.hl-row-p { background:rgba(192,132,252,.12) !important }
.vrow.hl-row-y:hover,.vrow.hl-row-o:hover,.vrow.hl-row-g:hover,.vrow.hl-row-b:hover,.vrow.hl-row-p:hover { filter:brightness(1.15) }

.vindic { display:flex; flex-direction:column; gap:2px; margin-top:7px; flex-shrink:0 }
.vd { width:6px; height:6px; border-radius:50% }
.vd-n { background:var(--gold) } .vd-b { background:var(--blue) }
.vd-c { background:var(--green) } .vd-t { background:var(--purple) }

/* ── Inline highlights (drag-selection) ─────────────────────────
   mark 태그: 글꼴 줄높이를 본문과 동일하게 유지하고,
   padding을 최소화하여 하이라이트 영역이 글자에 딱 맞도록 함.
   색상: 채도 낮추고 투명도 조절 → 어두운/밝은 테마 모두 세련되게.
───────────────────────────────────────────────────────────────── */
.vtxt mark.hl-active { filter: brightness(1.3) saturate(1.1); outline: none !important; }

/* mark: 어떤 폰트 안에 있어도 줄높이 불변 */
.vtxt mark,
.vtxt .dg mark,
.vtxt b mark,
.vtxt i mark,
.vtxt span mark {
  font-size: inherit !important;
  font-weight: inherit !important;
  font-style: inherit !important;
  font-family: inherit !important;
  letter-spacing: inherit !important;
  line-height: inherit !important;
  vertical-align: baseline !important;
  display: inline;
  padding: 0.05em 0.08em;
  border-radius: 3px;
  outline: none !important;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
  cursor: pointer;
  color: inherit;
}

/* ── 다크 테마 하이라이트 (기본) — 부드럽고 세련된 톤 ── */
.vtxt mark.hl-y { background: rgba(250,204,21,.30); }   /* 골드 옐로우 */
.vtxt mark.hl-o { background: rgba(251,146,60,.28); }   /* 웜 오렌지 */
.vtxt mark.hl-g { background: rgba(52,211,153,.25); }   /* 민트 그린 */
.vtxt mark.hl-b { background: rgba(96,165,250,.28); }   /* 소프트 블루 */
.vtxt mark.hl-p { background: rgba(192,132,252,.28); }  /* 라벤더 퍼플 */

/* vrow 전체 배경 hl (구절 전체 선택 시) */
.hl-y { background:rgba(250,204,21,.14); border-radius:2px }
.hl-o { background:rgba(251,146,60,.14); border-radius:2px }
.hl-g { background:rgba(52,211,153,.12); border-radius:2px }
.hl-b { background:rgba(96,165,250,.14); border-radius:2px }
.hl-p { background:rgba(192,132,252,.14); border-radius:2px }

/* ── 라이트 테마 하이라이트 — 더 선명하지만 과하지 않게 ── */
[data-theme="light"] .vtxt mark.hl-y { background: rgba(250,204,21,.35); }
[data-theme="light"] .vtxt mark.hl-o { background: rgba(251,146,60,.30); }
[data-theme="light"] .vtxt mark.hl-g { background: rgba(16,185,129,.28); }
[data-theme="light"] .vtxt mark.hl-b { background: rgba(59,130,246,.25); }
[data-theme="light"] .vtxt mark.hl-p { background: rgba(168,85,247,.25); }

/* HL picker dots */
.hlc-dot {
  width:20px; height:20px; border-radius:50%; cursor:pointer;
  border:2px solid transparent; transition:all .12s;
  flex-shrink:0;
}
.hlc-dot:hover { transform:scale(1.25); border-color:rgba(255,255,255,.5) }
.hlc-erase {
  background:var(--bg4); border:2px solid var(--border2) !important;
  display:flex; align-items:center; justify-content:center;
  font-size:9px; color:var(--text3);
}
.hlc-erase:hover { border-color:var(--text2) !important }

/* ── Strong's code inline badges ── */
.str-code {
  display:inline-block; font-family:'JetBrains Mono',monospace;
  font-size:9px; color:var(--gold); background:var(--gold-dim);
  border:1px solid rgba(201,151,58,.25); border-radius:3px;
  padding:0 3px; margin:0 1px; vertical-align:super;
  cursor:pointer; transition:all .12s; line-height:1.4;
  text-decoration:none;
}
.str-code:hover { background:var(--gold); color:var(--bg); border-color:var(--gold) }

/* Strong's search results */
.strongs-result {
  display:flex; align-items:center; gap:8px; padding:8px 12px;
  cursor:pointer; transition:background .1s; border-bottom:1px solid var(--border);
  font-size:12px;
}
.strongs-result:hover { background:var(--bg3) }
.str-badge {
  font-size:9px; font-weight:700; padding:2px 5px; border-radius:3px;
  flex-shrink:0; text-align:center; min-width:20px;
}
.str-heb { background:rgba(64,196,255,.15); color:#40C4FF }
.str-grk { background:rgba(206,147,216,.15); color:#CE93D8 }
.str-result-code { font-family:'JetBrains Mono',monospace; font-weight:700; color:var(--gold); flex-shrink:0; min-width:48px }
.str-result-lemma { font-size:15px; color:var(--text); flex-shrink:0 }
.str-result-translit { font-size:11px; color:var(--text3); font-style:italic; flex-shrink:0 }
.str-result-def { font-size:11px; color:var(--text2); flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }

/* Memo tag chips */
.memo-tag-chip {
  display:inline-flex; align-items:center; gap:2px;
  font-size:10px; color:var(--gold); background:var(--gold-dim);
  border:1px solid rgba(201,151,58,.2); border-radius:4px;
  padding:2px 6px; white-space:nowrap;
}
/* Memo verse link — 초록 pill (sync badge 스타일) */
.memo-vlink {
  display:inline-flex; align-items:center; gap:3px;
  color:#34d399; font-size:11px; cursor:pointer;
  background:rgba(52,211,153,.08); border:1px solid rgba(52,211,153,.25);
  border-radius:10px; padding:1px 7px; margin:0 1px; text-decoration:none;
  transition:all .15s; white-space:nowrap;
}
.memo-vlink:hover { background:rgba(52,211,153,.18); border-color:rgba(52,211,153,.4) }
/* Memo note link — 블루 pill */
.memo-nlink {
  display:inline-flex; align-items:center; gap:3px;
  color:#60a5fa; font-size:11px; cursor:pointer;
  background:rgba(96,165,250,.08); border:1px solid rgba(96,165,250,.25);
  border-radius:10px; padding:1px 7px; margin:0 1px;
  transition:all .15s; white-space:nowrap;
}
.memo-nlink:hover { background:rgba(96,165,250,.18); border-color:rgba(96,165,250,.4) }
/* Memo note search list */
.mnsl-item {
  display:flex; align-items:center; gap:6px; padding:7px 10px;
  cursor:pointer; font-size:12px; color:var(--text2); transition:background .08s;
}
.mnsl-item:hover, .mnsl-item.mnsl-active { background:var(--gold-dim); color:var(--gold) }


.ch-nav { display:flex; justify-content:space-between; align-items:center; padding:20px 0 0; margin-top:20px; border-top:1px solid var(--border) }
.chnav { padding:8px 20px; border-radius:var(--radius); font-size:12px; background:var(--bg3); border:1px solid var(--border2); color:var(--text2); transition:all .18s; font-weight:500 }
.chnav:hover { background:var(--accent-dim); border-color:var(--accent); color:var(--accent) }
