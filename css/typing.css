/* typing.css — 성경 타자 연습 */

/* ═══ Overlay ═══ */
.tp-overlay {
  visibility:hidden; opacity:0;
  position:fixed; inset:0; z-index:800;
  background:var(--bg); display:flex; flex-direction:column;
  transition:opacity .25s, visibility .25s;
}
.tp-overlay.tp-show { visibility:visible; opacity:1; }

/* ═══ Header ═══ */
.tp-header {
  display:flex; align-items:center; justify-content:space-between;
  padding:12px 32px; border-bottom:1px solid var(--border);
  background:var(--bg2); flex-shrink:0;
}
.tp-title {
  font-size:17px; font-weight:700; color:var(--text);
  display:flex; align-items:center; gap:10px;
}
.tp-title i { color:var(--gold); font-size:18px; }
.tp-header-right { display:flex; align-items:center; gap:14px; }
.tp-lang-group {
  display:flex; border:1px solid var(--border2); border-radius:6px; overflow:hidden;
}
.tp-lang {
  padding:6px 16px; font-size:13px; font-weight:600;
  background:transparent; color:var(--text3); cursor:pointer;
  border:none; transition:all .15s;
}
.tp-lang:first-child { border-right:1px solid var(--border2); }
.tp-lang.active { background:var(--gold); color:var(--bg); }
.tp-close {
  width:36px; height:36px; border-radius:6px; display:flex;
  align-items:center; justify-content:center;
  font-size:16px; color:var(--text3); cursor:pointer;
  transition:all .15s;
}
.tp-close:hover { background:var(--bg3); color:var(--text); }

/* ═══ Settings Bar ═══ */
.tp-settings {
  padding:12px 32px; border-bottom:1px solid var(--border);
  background:var(--bg2); flex-shrink:0;
}
.tp-source-row {
  display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px;
}
.tp-src-btn {
  padding:7px 14px; border-radius:6px; font-size:12px; font-weight:600;
  background:var(--bg3); color:var(--text3); border:1px solid var(--border2);
  cursor:pointer; transition:all .15s; display:flex; align-items:center; gap:6px;
}
.tp-src-btn:hover { border-color:var(--text3); color:var(--text); }
.tp-src-btn.active {
  background:var(--gold-dim); border-color:var(--gold); color:var(--gold);
}
.tp-sel-row {
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
  margin-top:8px;
}
.tp-select {
  padding:7px 12px; border-radius:6px; font-size:13px;
  background:var(--bg3); border:1px solid var(--border2);
  color:var(--text); outline:none; cursor:pointer; max-width:200px;
}
.tp-select:focus { border-color:var(--gold); }
.tp-small-btn {
  padding:6px 12px; border-radius:5px; font-size:12px; font-weight:600;
  background:var(--bg3); border:1px solid var(--border2); color:var(--text3);
  cursor:pointer; transition:all .12s; display:flex; align-items:center; gap:5px;
}
.tp-small-btn:hover { border-color:var(--gold); color:var(--gold); }
.tp-small-btn.tp-del:hover { border-color:var(--red,#e74c3c); color:var(--red,#e74c3c); }

/* 폴더 태그 리스트 */
.tp-folder-list {
  display:flex; flex-wrap:wrap; gap:6px; margin-top:10px;
}
.tp-folder-tag {
  display:inline-flex; align-items:center; gap:5px;
  padding:4px 10px; border-radius:5px; font-size:11px;
  background:var(--bg3); color:var(--text2); border:1px solid var(--border2);
}
.tp-folder-tag i {
  font-size:9px; cursor:pointer; opacity:.5; transition:opacity .1s;
}
.tp-folder-tag i:hover { opacity:1; color:var(--red,#e74c3c); }

/* ═══ Body (typing area) ═══ */
.tp-body {
  flex:1; overflow-y:auto; display:flex;
  flex-direction:column; align-items:center;
  justify-content:center; padding:40px 40px;
}

/* Start Screen */
.tp-start-screen {
  text-align:center; display:flex; flex-direction:column;
  align-items:center; gap:24px;
}
.tp-start-icon {
  font-size:64px; color:var(--text3); opacity:.25;
}
.tp-start-msg {
  font-size:16px; color:var(--text3);
}
.tp-start-btn {
  padding:14px 40px; border-radius:10px; font-size:16px; font-weight:700;
  background:var(--gold); color:var(--bg); border:none; cursor:pointer;
  transition:all .15s; display:flex; align-items:center; gap:10px;
}
.tp-start-btn:hover { filter:brightness(1.1); transform:translateY(-1px); }

/* Verse Area */
.tp-verse-area {
  width:100%; max-width:960px; margin-bottom:28px;
  position:relative;
}
.tp-verse-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:16px;
}
.tp-verse-ref {
  display:flex; align-items:baseline; gap:10px;
}
.tp-ref-book {
  font-size:26px; font-weight:800; color:var(--gold);
  font-family:'Playfair Display','Noto Sans KR',serif;
  letter-spacing:-.3px;
}
.tp-ref-chv {
  font-size:20px; font-weight:700; color:var(--accent-color,#60a5fa);
  font-family:'JetBrains Mono',monospace;
}
.tp-heart-btn {
  width:40px; height:40px; border-radius:50%; display:flex;
  align-items:center; justify-content:center;
  font-size:20px; color:var(--text3); cursor:pointer;
  transition:all .15s;
}
.tp-heart-btn:hover { color:#ff6b81; }
.tp-heart-btn.tp-hearted { color:#ff4757; }
.tp-heart-btn.tp-hearted:hover { color:#ff6b81; }
@keyframes tp-heartPop {
  0%,100% { transform:scale(1); }
  50% { transform:scale(1.3); }
}

/* Character display — 타자기 용지 느낌 */
.tp-chars {
  font-size:24px; line-height:2.2; color:var(--text);
  font-family:'KoPubWorld Dotum','Noto Sans KR',sans-serif;
  padding:32px 40px; border-radius:12px;
  background:var(--bg2); border:1px solid var(--border);
  word-break:break-all; user-select:none;
  cursor:text; min-height:120px;
  position:relative;
}
.tp-chars:hover { border-color:var(--text3); }

/* 미입력 글자: 흰색/밝은 색으로 읽을 수 있게 */
.tp-char {
  border-radius:2px; color:#fff; opacity:0.5;
  transition:opacity .1s, color .1s;
}
/* 정확하게 친 글자: 골드 색상으로 강조 */
.tp-char.tp-correct {
  color:var(--gold); opacity:1; font-weight:600;
}
/* 오타: 빨간 잉크 */
.tp-char.tp-wrong {
  color:#ff4757; opacity:1;
  background:rgba(255,71,87,.12);
  text-decoration:line-through;
  text-decoration-color:rgba(255,71,87,.5);
}
/* 커서 위치 */
.tp-char.tp-cursor {
  opacity:0.7; color:#fff;
  border-bottom:2.5px solid var(--gold);
  animation:tp-blink 1s step-end infinite;
}
/* 한글 조합 중 (실시간 자모 표시) */
.tp-char.tp-composing {
  color:var(--accent-color,#60a5fa); opacity:1;
  border-bottom:2.5px solid var(--accent-color,#60a5fa);
  background:rgba(96,165,250,.08);
  transition:none;
}
@keyframes tp-blink {
  0%,100% { border-bottom-color:var(--gold); }
  50% { border-bottom-color:transparent; }
}

/* 숨겨진 입력 textarea (IME 캡처용) */
.tp-ghost-input {
  position:absolute; left:0; bottom:0;
  width:100%; height:1px; min-height:0;
  padding:0; margin:0; border:none;
  opacity:0; overflow:hidden; resize:none;
  font-size:24px;
  pointer-events:none;
}

/* Stats bar */
.tp-stats {
  display:flex; gap:28px; justify-content:center;
  margin-top:20px; flex-wrap:wrap; width:100%; max-width:960px;
}
.tp-stats span {
  font-size:14px; color:var(--text3); font-weight:500;
  display:flex; align-items:center; gap:6px;
}
.tp-stats i { color:var(--gold); font-size:13px; }

/* ═══ Result Screen ═══ */
.tp-result {
  width:100%; max-width:960px;
  display:flex; flex-direction:column; align-items:center; gap:28px;
  animation:tp-fadeUp .45s ease;
}
@keyframes tp-fadeUp {
  from { opacity:0; transform:translateY(24px); }
  to { opacity:1; transform:translateY(0); }
}
.tp-result-head {
  text-align:center; display:flex; flex-direction:column;
  align-items:center; gap:6px;
}
.tp-result-icon { font-size:52px; color:var(--gold); }
.tp-result-title {
  font-size:28px; font-weight:800; color:var(--text);
}
.tp-result-ref {
  font-size:15px; color:var(--text3);
  font-family:'JetBrains Mono',monospace;
}

/* Stat cards */
.tp-result-cards {
  display:flex; gap:20px; justify-content:center;
  flex-wrap:wrap; width:100%;
}
.tp-rcard {
  flex:1; min-width:160px; max-width:230px;
  background:var(--bg2); border:1px solid var(--border);
  border-radius:16px; padding:24px 20px;
  display:flex; flex-direction:column; align-items:center;
  gap:8px; text-align:center; position:relative;
}

/* SVG accuracy ring */
.tp-ring-wrap {
  position:relative; width:120px; height:120px;
}
.tp-ring-svg {
  width:120px; height:120px; transform:rotate(-90deg);
}
.tp-ring-bg {
  fill:none; stroke:var(--bg3); stroke-width:8;
}
.tp-ring-fill {
  fill:none; stroke:var(--gold); stroke-width:8;
  stroke-linecap:round;
  animation:tp-ringDraw 1s ease forwards;
}
@keyframes tp-ringDraw {
  from { stroke-dashoffset:326.7; }
}
.tp-ring-text {
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  pointer-events:none;
}
.tp-ring-num {
  font-size:30px; font-weight:800; color:var(--text);
  font-family:'JetBrains Mono',monospace;
}
.tp-ring-num small { font-size:16px; font-weight:600; }
.tp-ring-lbl {
  font-size:12px; color:var(--gold); font-weight:700;
  margin-top:2px;
}
.tp-rcard-title {
  font-size:13px; color:var(--text3); font-weight:600;
}
.tp-rcard-big {
  font-size:40px; font-weight:800; color:var(--text);
  font-family:'JetBrains Mono',monospace; line-height:1.1;
}
.tp-rcard-unit {
  font-size:13px; color:var(--text3); font-weight:500;
}
.tp-rcard-wpm {
  font-size:15px; font-weight:700;
  color:var(--accent-color,#60a5fa);
  margin-top:6px;
}

/* Speed bar */
.tp-rcard-bar-wrap {
  width:100%; height:6px; background:var(--bg3);
  border-radius:3px; overflow:hidden; margin-top:8px;
}
.tp-rcard-bar {
  height:100%; border-radius:3px; background:var(--gold);
  animation:tp-barGrow .8s ease; transform-origin:left;
}
@keyframes tp-barGrow {
  from { transform:scaleX(0); }
  to { transform:scaleX(1); }
}
.tp-rcard-tag { font-size:12px; font-weight:700; margin-top:2px; }
.tp-spd-fast { color:var(--gold); }
.tp-spd-good { color:#4ade80; }
.tp-spd-normal { color:var(--text2); }
.tp-spd-slow { color:var(--text3); }

/* Character breakdown chart */
.tp-result-chart {
  width:100%; max-width:540px;
  background:var(--bg2); border:1px solid var(--border);
  border-radius:14px; padding:20px 28px;
}
.tp-chart-title {
  font-size:14px; font-weight:700; color:var(--text);
  margin-bottom:12px; display:flex; align-items:center; gap:8px;
}
.tp-chart-title i { color:var(--gold); font-size:13px; }
.tp-chart-bar {
  display:flex; width:100%; height:16px;
  border-radius:8px; overflow:hidden; background:var(--bg3);
}
.tp-cbar-ok {
  background:var(--gold);
  animation:tp-barGrow .8s ease; transform-origin:left;
}
.tp-cbar-err {
  background:#ff4757;
  animation:tp-barGrow .8s ease .12s both; transform-origin:left;
}
.tp-cbar-skip {
  background:var(--text3); opacity:.4;
  animation:tp-barGrow .8s ease .2s both; transform-origin:left;
}
.tp-chart-legend {
  display:flex; gap:18px; flex-wrap:wrap; margin-top:12px;
}
.tp-chart-legend span {
  font-size:13px; color:var(--text2); display:flex; align-items:center; gap:6px;
}
.tp-dot {
  width:10px; height:10px; border-radius:50%; display:inline-block; flex-shrink:0;
}

/* Result actions */
.tp-result-acts {
  display:flex; gap:12px; align-items:center;
  flex-wrap:wrap; justify-content:center;
}
.tp-next-btn {
  padding:14px 32px; border-radius:10px; font-size:16px; font-weight:700;
  background:var(--gold); color:var(--bg); border:none; cursor:pointer;
  transition:all .15s; display:flex; align-items:center; gap:8px;
}
.tp-next-btn:hover { filter:brightness(1.1); transform:translateY(-1px); }
.tp-result-acts .tp-select { font-size:12px; }
.tp-result-acts .tp-small-btn { font-size:12px; }
.tp-result-enter {
  font-size:12px; color:var(--text3); opacity:.5;
  display:flex; align-items:center; gap:6px;
}

/* ═══ Responsive ═══ */
@media(max-width:600px){
  .tp-header { padding:10px 14px; }
  .tp-settings { padding:10px 14px; }
  .tp-body { padding:20px 14px; }
  .tp-chars { font-size:18px; padding:18px 16px; min-height:80px; }
  .tp-source-row { gap:5px; }
  .tp-src-btn { padding:5px 10px; font-size:11px; }
  .tp-ref-book { font-size:20px; }
  .tp-ref-chv { font-size:16px; }
  .tp-stats span { font-size:12px; }
  .tp-result-cards { gap:10px; }
  .tp-rcard { min-width:120px; padding:16px 12px; }
  .tp-ring-wrap { width:96px; height:96px; }
  .tp-ring-svg { width:96px; height:96px; }
  .tp-ring-num { font-size:24px; }
  .tp-rcard-big { font-size:30px; }
  .tp-result-title { font-size:22px; }
  .tp-result-icon { font-size:40px; }
  .tp-result-chart { padding:14px 16px; }
  .tp-chart-legend { gap:10px; }
  .tp-chart-legend span { font-size:11px; }
}
