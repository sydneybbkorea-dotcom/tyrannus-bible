<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Tyrannus β€” ν‘μ¤€ν‚Ήμ μ„μ¤μ„±κ²½</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/fonts.css?v=11">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- App CSS (λ¨λ“ν™”) -->
<link rel="stylesheet" href="css/variables.css?v=11">
<link rel="stylesheet" href="css/layout.css?v=11">
<link rel="stylesheet" href="css/topbar.css?v=11">
<link rel="stylesheet" href="css/bible.css?v=11">
<link rel="stylesheet" href="css/notes.css?v=11">
<link rel="stylesheet" href="css/commentary.css?v=11">
<link rel="stylesheet" href="css/search.css?v=11">
<link rel="stylesheet" href="css/ui.css?v=11">
<link rel="stylesheet" href="css/nav-picker.css?v=11">

<!-- Firebase (ES module β€” λ³‘λ ¬ λ΅λ“) -->
<script type="module" src="js/firebase.js"></script>
</head>

<body>

<!-- β•β• TOPBAR β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β• -->
<div id="topbar">
  <span class="logo">Tyrannus</span>
  <!-- μ¨κ²¨μ§„ select (λ‚΄λ¶€ νΈν™μ©) -->
  <select id="bookSel" style="display:none" onchange="onBookChange()"></select>
  <select id="chSel" style="display:none" onchange="onChChange()"></select>
  <!-- ν†µν•© μ±…/μ¥ μ„ νƒ λ²„νΌ -->
  <button id="navPickerBtn" class="nav-picker-btn" onclick="toggleNavPicker()">
    <span id="navPickerLabel">μ°½μ„ΈκΈ° 1μ¥</span>
    <i class="fa fa-chevron-down nav-picker-arrow"></i>
  </button>
  <!-- μ±…/μ¥ μ„ νƒ νμ—… -->
  <div id="navPickerPopup" class="nav-picker-popup"></div>
  <div class="tb-sep"></div>
  <button class="tb-btn on" id="tbBook" onclick="toggleBookNav()"><i class="fa fa-book"></i> λ©μ°¨</button>
  <button class="tb-btn on" id="tbNotes" onclick="togglePanel('notes')"><i class="fa fa-pen"></i> λ…ΈνΈ</button>
  <button class="tb-btn" id="tbDict" onclick="togglePanel('dictionary')"><i class="fa fa-book"></i> μ‚¬μ „</button>
  <button class="tb-btn" id="tbStrong" onclick="toggleStrongCodes()" title="μ›μ–΄ μ½”λ“(μ¤νΈλ΅± λ²νΈ) ν‘μ‹/μ¨κΈ°κΈ°"><i class="fa fa-code"></i> μ›μ–΄</button>
  <button class="tb-btn" id="tbParallel" onclick="toggleParallel()" title="μν• λ€μ΅° ν‘μ‹"><i class="fa fa-columns"></i> μν•</button>
  <button class="tb-btn" id="tbSearch" onclick="togglePanel('search')"><i class="fa fa-search"></i> κ²€μƒ‰μ„¤μ •</button>
  <button class="tb-btn" id="tbReadMode" onclick="toggleReadMode()" title="μ½κΈ° λ¨λ“"><i class="fa fa-book-reader"></i> μ½κΈ°</button>
  <div class="tb-right">
    <div class="qs-wrap">
      <input type="text" id="qsInput" placeholder="λΉ λ¥Έ κ²€μƒ‰..." onkeydown="if(event.key==='Enter')doQS()">
      <i class="fa fa-search qs-icon" onclick="doQS()"></i>
    </div>
    <!-- ν…λ§ μ „ν™ λ²„νΌ -->
    <div id="themePicker">
      <button onclick="setTheme('dark')" id="themeBtn-dark" title="λ‹¤ν¬ ν…λ§"><i class="fa fa-moon"></i></button>
      <span class="theme-sep"></span>
      <button onclick="setTheme('light')" id="themeBtn-light" title="λΌμ΄νΈ ν…λ§"><i class="fa fa-sun"></i></button>
    </div>
    <!-- λ΅κ·ΈμΈ λ²„νΌ -->
    <button id="loginBtn" onclick="signInWithGoogle()">
      <i class="fa fa-sign-in-alt"></i> λ΅κ·ΈμΈ
    </button>
    <!-- λ΅κ·ΈμΈ ν›„ μ‚¬μ©μ μ •λ³΄ -->
    <div id="userBar" style="display:none;align-items:center;gap:8px;flex-shrink:0;">
      <div id="syncBadge" style="display:none;align-items:center;gap:4px;font-size:11px;color:var(--gold);padding:2px 8px;border-radius:10px;background:var(--gold-dim);border:1px solid rgba(201,151,58,.3);">
        <i class="fa fa-cloud" style="font-size:10px"></i> ν΄λΌμ°λ“ μ €μ¥ μ¤‘
      </div>
      <img id="userAvatar" src="" style="width:28px;height:28px;border-radius:50%;border:2px solid var(--gold);object-fit:cover;">
      <span id="userName" style="font-size:12px;color:var(--text2);max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"></span>
      <button onclick="signOutUser()" style="font-size:11px;color:var(--text3);background:none;border:1px solid var(--border);border-radius:4px;padding:2px 8px;cursor:pointer;">λ΅κ·Έμ•„μ›ƒ</button>
    </div>
  </div>
</div>

<!-- β•β• MAIN β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β• -->
<div id="main">

  <!-- LEFT: Book Navigator -->
  <div id="bookNav">
    <div class="bnav-head"><i class="fa fa-book-open" style="font-size:10px"></i> μ„±κ²½ λ©λ΅</div>
    <div style="padding:6px 8px;border-bottom:1px solid var(--border);">
      <input type="text" id="bookSearchInput" placeholder="μ„±κ²½ κ²€μƒ‰..."
        style="width:100%;background:var(--bg3);border:1px solid var(--border);border-radius:4px;padding:5px 8px;font-size:11px;color:var(--text);outline:none;"
        oninput="filterBooks(this.value)">
    </div>
    <div id="bookList"></div>
  </div>

  <!-- CENTER: Bible Text -->
  <div id="biblePane">
    <div id="bibleTabBar">
      <div id="bibleTabList"></div>
      <button id="bibleTabAdd" onclick="addBibleTab()" title="μƒ νƒ­"><i class="fa fa-plus"></i></button>
    </div>
    <div id="bibleScroll">
      <div class="ch-head">
        <h1 id="chTitle">μ°½μ„ΈκΈ° 1μ¥</h1>
        <p id="chSub">ν‘μ¤€ν‚Ήμ μ„μ¤μ„±κ²½ (SKJB)</p>
      </div>
      <div id="vCont"></div>
      <div class="ch-nav">
        <button class="chnav" onclick="prevCh()"><i class="fa fa-chevron-left"></i> μ΄μ „ μ¥</button>
        <span style="font-size:11px;color:var(--text3)" id="chNavLbl"></span>
        <button class="chnav" onclick="nextCh()">λ‹¤μ μ¥ <i class="fa fa-chevron-right"></i></button>
      </div>
    </div>
  </div>

  <!-- RIGHT: Panel -->
  <div id="rightPanel">
    <div class="rp-tabs" id="rpTabs">
      <div class="rp-subtabs" id="subtabs-notes">
        <div class="rp-tab act" data-sub="notes" onclick="switchSub('notes')"><i class="fa fa-pen"></i> λ…ΈνΈ</div>
        <div class="rp-tab" data-sub="commentary" onclick="switchSub('commentary')"><i class="fa fa-scroll"></i> μ£Όμ„</div>
        <div class="rp-tab" data-sub="outline" onclick="switchSub('outline')"><i class="fa fa-sitemap"></i> μ•„μ›ƒλΌμΈ</div>
      </div>
      <div class="rp-subtabs" id="subtabs-dict" style="display:none">
        <div class="rp-tab act" data-sub="dict-strongs" onclick="switchSub('dict-strongs')"><i class="fa fa-language"></i> μ¤νΈλ΅±</div>
        <div class="rp-tab" data-sub="dict-webster" onclick="switchSub('dict-webster')"><i class="fa fa-spell-check"></i> μ›Ήμ¤ν„°</div>
        <div class="rp-tab" data-sub="dict-enko" onclick="switchSub('dict-enko')"><i class="fa fa-exchange-alt"></i> μν•</div>
        <div class="rp-tab" data-sub="dict-korean" onclick="switchSub('dict-korean')"><i class="fa fa-font"></i> ν‘μ¤€κµ­μ–΄</div>
      </div>
      <div class="rp-subtabs" id="subtabs-search" style="display:none">
        <div class="rp-tab act" data-sub="search" onclick="switchSub('search')"><i class="fa fa-search"></i> κ²€μƒ‰μ„¤μ •</div>
      </div>
    </div>
    <div class="rp-body">

      <!-- NOTES TAB -->
      <div class="rp-sec act" id="sec-notes">
        <div id="notesLayout">
          <div id="explorerOverlay" onclick="closeExplorer()"></div>
          <div id="noteExplorer">
            <div class="exp-head">
              <span class="exp-title"><i class="fa fa-folder-open" style="margin-right:4px"></i>νμΌ νƒμƒ‰κΈ°</span>
              <div class="exp-actions">
                <button class="exp-btn" title="μƒ ν΄λ”" onclick="newFolder()"><i class="fa fa-folder-plus"></i></button>
                <button class="exp-btn" title="μƒ λ…ΈνΈ" onclick="newNote()"><i class="fa fa-plus"></i></button>
                <button class="exp-btn" title="λ‹«κΈ°" onclick="closeExplorer()"><i class="fa fa-times"></i></button>
              </div>
            </div>
            <div id="folderTree"></div>
          </div>
          <div id="noteEditor">
            <div class="note-title-wrap">
              <input type="text" id="noteTitle" placeholder="λ…ΈνΈ μ λ©...">
              <button class="folder-icon-btn" id="drawerBtn" title="ν΄λ” νƒμƒ‰κΈ° μ—΄κΈ°" onclick="toggleExplorer()">
                <i class="fa fa-folder-open"></i>
              </button>
            </div>
            <div class="rte-bar">
              <div class="rte-row">
                <select class="rte-sel" onchange="cmd('formatBlock',this.value);this.value=''">
                  <option value="">λ‹¨λ½</option>
                  <option value="h1">H1</option>
                  <option value="h2">H2</option>
                  <option value="h3">H3</option>
                  <option value="p">λ³Έλ¬Έ</option>
                  <option value="blockquote">μΈμ©</option>
                </select>
                <select class="rte-sel rte-fontsize" title="κΈ€κΌ΄ ν¬κΈ°" onchange="setFontSize(this.value);this.value=''">
                  <option value="">ν¬κΈ°</option>
                  <option value="10">10</option><option value="12">12</option><option value="14">14</option>
                  <option value="16">16</option><option value="18">18</option><option value="20">20</option>
                  <option value="24">24</option><option value="28">28</option><option value="32">32</option>
                </select>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="κµµκ² (Ctrl+B)" onmousedown="event.preventDefault()" onclick="cmd('bold')"><b>B</b></button>
                <button class="rte-btn" title="κΈ°μΈμ„ (Ctrl+I)" onmousedown="event.preventDefault()" onclick="cmd('italic')"><i>I</i></button>
                <button class="rte-btn" title="λ°‘μ¤„ (Ctrl+U)" onmousedown="event.preventDefault()" onclick="cmd('underline')"><u>U</u></button>
                <button class="rte-btn" title="μ·¨μ†μ„ " onmousedown="event.preventDefault()" onclick="cmd('strikeThrough')"><s>S</s></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="ν…μ¤νΈ μƒ‰μƒ" onclick="openColorPalette(this,'fore')" onmousedown="event.preventDefault()"><i class="fa fa-font" style="color:var(--gold)"></i></button>
                <button class="rte-btn" title="λ°°κ²½ ν•μ΄λΌμ΄νΈ" onclick="openColorPalette(this,'bg')" onmousedown="event.preventDefault()"><i class="fa fa-fill-drip"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="κΈ€λ¨Έλ¦¬ λ©λ΅" onmousedown="event.preventDefault()" onclick="cmd('insertUnorderedList')"><i class="fa fa-list-ul"></i></button>
                <button class="rte-btn" title="λ²νΈ λ©λ΅" onmousedown="event.preventDefault()" onclick="cmd('insertOrderedList')"><i class="fa fa-list-ol"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="μ™Όμ½ μ •λ ¬" onmousedown="event.preventDefault()" onclick="cmd('justifyLeft')"><i class="fa fa-align-left"></i></button>
                <button class="rte-btn" title="κ°€μ΄λ° μ •λ ¬" onmousedown="event.preventDefault()" onclick="cmd('justifyCenter')"><i class="fa fa-align-center"></i></button>
                <button class="rte-btn" title="μ¤λ¥Έμ½ μ •λ ¬" onmousedown="event.preventDefault()" onclick="cmd('justifyRight')"><i class="fa fa-align-right"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="ν‘ μ‚½μ…" onclick="insertTable()"><i class="fa fa-table"></i></button>
                <button class="rte-btn" title="κµ¬λ¶„μ„ " onmousedown="event.preventDefault()" onclick="cmd('insertHorizontalRule')"><i class="fa fa-minus"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="μ‹¤ν–‰ μ·¨μ†" onmousedown="event.preventDefault()" onclick="cmd('undo')"><i class="fa fa-undo"></i></button>
                <button class="rte-btn" title="λ‹¤μ‹ μ‹¤ν–‰" onmousedown="event.preventDefault()" onclick="cmd('redo')"><i class="fa fa-redo"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" title="λ“¤μ—¬μ“°κΈ°" onmousedown="event.preventDefault()" onclick="cmd('indent')"><i class="fa fa-indent"></i></button>
                <button class="rte-btn" title="λ‚΄μ–΄μ“°κΈ°" onmousedown="event.preventDefault()" onclick="cmd('outdent')"><i class="fa fa-outdent"></i></button>
              </div>
              <div class="rte-row rte-row2">
                <span class="rte-row-label">μ‚½μ…</span>
                <div class="rte-sep"></div>
                <button class="rte-btn rte-insert" onclick="openNoteLink()" title="λ…ΈνΈ λ§ν¬ μ‚½μ…"><i class="fa fa-link"></i><span class="rte-lbl">λ…ΈνΈ</span></button>
                <button class="rte-btn rte-insert" onclick="openVersePick()" title="κµ¬μ  λ§ν¬ μ‚½μ…"><i class="fa fa-book-open"></i><span class="rte-lbl">κµ¬μ </span></button>
                <button class="rte-btn rte-insert" onclick="openUrlEmbed(this)" title="μ™Έλ¶€ λ§ν¬ μ‚½μ…"><i class="fa fa-globe"></i><span class="rte-lbl">λ§ν¬</span></button>
                <button class="rte-btn rte-insert" onclick="openYoutubeEmbed(this)" title="μ νλΈ μ‚½μ…"><i class="fab fa-youtube"></i><span class="rte-lbl">μ νλΈ</span></button>
                <button class="rte-btn rte-insert" onclick="openFileAttach()" title="νμΌ/μ΄λ―Έμ§€ μ²¨λ¶€"><i class="fa fa-paperclip"></i><span class="rte-lbl">νμΌ</span></button>
                <div class="rte-sep"></div>
                <button class="rte-btn" onmousedown="event.preventDefault()" onclick="insertCallout('info')" title="μ •λ³΄ λ°•μ¤"><i class="fa fa-info-circle" style="color:#4a9eff"></i></button>
                <button class="rte-btn" onmousedown="event.preventDefault()" onclick="insertCallout('warn')" title="κ²½κ³  λ°•μ¤"><i class="fa fa-exclamation-triangle" style="color:#f0a500"></i></button>
                <button class="rte-btn" onmousedown="event.preventDefault()" onclick="insertCallout('pray')" title="μ•„μ΄λ””μ–΄/λ¬µμƒ λ°•μ¤"><i class="fa fa-lightbulb" style="color:var(--gold)"></i></button>
                <div class="rte-sep"></div>
                <button class="rte-btn rte-insert" onmousedown="event.preventDefault()" onclick="insertCheckbox()" title="μ²΄ν¬λ°•μ¤ μ‚½μ…"><i class="fa fa-check-square"></i><span class="rte-lbl">μ²΄ν¬</span></button>
                <button class="rte-btn rte-insert" onmousedown="event.preventDefault()" onclick="insertDateStamp()" title="λ‚ μ§ μ‚½μ…"><i class="fa fa-calendar-day"></i><span class="rte-lbl">λ‚ μ§</span></button>
              </div>
            </div>
            <div id="noteContent" contenteditable="true"
              data-ph=""></div>
            <div class="backlink-panel" id="backlinkPanel">
              <div class="backlink-head" onclick="toggleBacklinks()">
                <i class="fa fa-link"></i>&nbsp;λ°±λ§ν¬&nbsp;<span id="backlinkCount" style="color:var(--gold)"></span>
                <i class="fa fa-chevron-down" id="blChevron" style="margin-left:auto;transition:transform .2s;font-size:9px"></i>
              </div>
              <div id="backlinkList">
                <div class="bl-empty" style="padding:12px;text-align:center;color:var(--text3);font-size:11px;">
                  μ΄ λ…ΈνΈλ΅ μ—°κ²°λ λ‹¤λ¥Έ λ…ΈνΈκ°€ μ—†μµλ‹λ‹¤
                </div>
              </div>
            </div>
            <div class="note-nav-bar" id="noteNavBar" style="display:none">
              <button class="nav-back-btn" id="backBtn" onclick="goBack()" title="μ΄μ „ λ…ΈνΈλ΅ λμ•„κ°€κΈ°" style="display:none">
                <i class="fa fa-arrow-left"></i>
              </button>
              <div class="nav-path" id="navPath"></div>
              <div id="nedBreadcrumb" class="ned-breadcrumb"></div>
            </div>
            <div class="note-footer">
              <span class="nfooter-label">π·</span>
              <div class="tag-row" id="tagRow">
                <input class="tag-inp" id="tagInp" placeholder="νƒκ·Έ..." onkeydown="addTag(event)">
              </div>
              <div style="flex:1;min-width:4px"></div>
              <select id="noteFolderSel" style="font-size:11px;background:var(--bg3);border:1px solid var(--border);border-radius:5px;padding:3px 6px;color:var(--text2);outline:none;cursor:pointer;max-width:90px;"></select>
              <button onclick="saveNote()" title="μ €μ¥" style="margin-left:5px;padding:4px 12px;border-radius:5px;font-size:11px;font-weight:700;background:var(--gold);color:var(--bg);border:none;cursor:pointer;flex-shrink:0;"><i class="fa fa-save"></i> μ €μ¥</button>
            </div>
          </div>
        </div>
      </div>

      <!-- COMMENTARY SUB-TAB -->
      <div class="rp-sec" id="sec-commentary">
        <div class="comm-mode-bar">
          <button class="comm-mode-btn comm-mode-active" id="commModeVerse" onclick="setCommMode('verse')">
            <i class="fa fa-crosshairs"></i> κµ¬μ λ³„
          </button>
          <button class="comm-mode-btn" id="commModeChapter" onclick="setCommMode('chapter')">
            <i class="fa fa-list"></i> μ¥λ³„
          </button>
        </div>
        <div class="comm-body-wrap" id="commentaryContent">
          <div class="comm-hint"><i class="fa fa-scroll"></i>κµ¬μ μ„ ν΄λ¦­ν•λ©΄<br>μ£Όμ„μ„ λ³Ό μ μμ–΄μ”</div>
        </div>
      </div>

      <!-- OUTLINE SUB-TAB -->
      <div class="rp-sec" id="sec-outline">
        <div class="outline-wrap" id="outlineContent">
          <div class="outline-toolbar">
            <span style="font-size:10px;font-weight:700;color:var(--text3);letter-spacing:.5px"><i class="fa fa-sitemap" style="margin-right:4px"></i>λ…ΈνΈ μ•„μ›ƒλΌμΈ</span>
            <div style="display:flex;gap:4px">
              <button class="outline-tb-btn" onclick="toggleOutlineExpand()" title="λ¨λ‘ νΌμΉκΈ°/μ ‘κΈ°"><i class="fa fa-expand-arrows-alt"></i></button>
            </div>
          </div>
          <div id="outlineTree" style="overflow-y:auto;flex:1;padding:6px 0"></div>
        </div>
      </div>

      <!-- DICTIONARY TAB -->
      <div class="rp-sec" id="sec-dictionary">
        <div class="rp-sec act" id="sec-dict-strongs" style="display:flex">
          <div style="padding:8px 12px;border-bottom:1px solid var(--border);flex-shrink:0;display:flex;gap:6px;align-items:center">
            <input type="text" id="strongsSearchInput" placeholder="μ¤νΈλ΅± λ²νΈ (H1, G3056) λλ” μ›μ–΄ κ²€μƒ‰..."
              style="flex:1;background:var(--bg3);border:1px solid var(--border);border-radius:5px;padding:6px 10px;font-size:12px;color:var(--text);outline:none;"
              onkeydown="if(event.key==='Enter')searchStrongs()">
            <button onclick="searchStrongs()" style="padding:6px 12px;border-radius:5px;font-size:11px;font-weight:700;background:var(--gold);color:var(--bg);border:none;cursor:pointer;flex-shrink:0"><i class="fa fa-search"></i></button>
          </div>
          <div class="comm-body-wrap" id="dictStrongs" style="overflow-y:auto;flex:1">
            <div class="comm-hint"><i class="fa fa-language"></i> Strong's Concordance<br>μ›μ–΄ μ½”λ“λ¥Ό κ²€μƒ‰ν•κ±°λ‚<br>κµ¬μ μ μ›μ–΄ μ½”λ“λ¥Ό ν΄λ¦­ν•μ„Έμ”<br><br><span style="font-size:10px;color:var(--text3)">H = νλΈλ¦¬μ–΄ (κµ¬μ•½) Β· G = κ·Έλ¦¬μ¤μ–΄ (μ‹ μ•½)</span></div>
          </div>
        </div>
        <div class="rp-sec" id="sec-dict-webster" style="display:none;flex-direction:column">
          <iframe id="websterFrame" src="https://webstersdictionary1828.com/" style="flex:1;border:none;width:100%;min-height:0"></iframe>
        </div>
        <div class="rp-sec" id="sec-dict-enko" style="display:none;flex-direction:column">
          <iframe id="enkoFrame" src="https://en.dict.naver.com/" style="flex:1;border:none;width:100%;min-height:0"></iframe>
        </div>
        <div class="rp-sec" id="sec-dict-korean" style="display:none;flex-direction:column">
          <iframe id="koreanFrame" src="https://stdict.korean.go.kr/main/main.do" style="flex:1;border:none;width:100%;min-height:0"></iframe>
        </div>
      </div>

      <!-- SEARCH TAB -->
      <div class="rp-sec" id="sec-search">
        <div class="search-wrap">
          <div class="sch-row">
            <input type="text" id="schInput" placeholder="λ‹¨μ–΄ λλ” κµ¬μ  κ²€μƒ‰..." onkeydown="if(event.key==='Enter')doSearch()">
            <button onclick="doSearch()">κ²€μƒ‰</button>
          </div>
          <div class="sch-filters">
            <label style="font-size:10px;color:var(--text3);margin-right:8px;display:inline-flex;align-items:center;gap:4px;">
              <input type="checkbox" id="filter-all" onchange="toggleAllFilters(this)" style="cursor:pointer"> μ „μ²΄
            </label>
            <label style="font-size:10px;color:var(--text2);margin-right:8px;display:inline-flex;align-items:center;gap:4px;">
              <input type="checkbox" class="search-filter" data-f="OT" onchange="updateSearchFilters()" style="cursor:pointer" checked> κµ¬μ•½
            </label>
            <label style="font-size:10px;color:var(--text2);margin-right:8px;display:inline-flex;align-items:center;gap:4px;">
              <input type="checkbox" class="search-filter" data-f="NT" onchange="updateSearchFilters()" style="cursor:pointer" checked> μ‹ μ•½
            </label>
            <label style="font-size:10px;color:var(--text2);margin-right:8px;display:inline-flex;align-items:center;gap:4px;">
              <input type="checkbox" class="search-filter" data-f="notes" onchange="updateSearchFilters()" style="cursor:pointer" checked> λ…ΈνΈ
            </label>
            <label style="font-size:10px;color:var(--text2);margin-right:8px;display:inline-flex;align-items:center;gap:4px;">
              <input type="checkbox" class="search-filter" data-f="commentary" onchange="updateSearchFilters()" style="cursor:pointer" checked> μ£Όμ„
            </label>
          </div>
          <div class="sch-count" id="schCount"></div>
          <div id="schList"></div>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- β•β• CONTEXT MENU β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β• -->
<div id="ctxMenu">
  <div class="citem" onclick="ctxHL()"><i class="fa fa-highlighter"></i> ν•κ΄‘ν μ μ© (λ“λκ·Έ μ„ νƒ ν›„)</div>
  <div class="citem" onclick="ctxClearHL()" id="ctxClearHLItem" style="display:none"><i class="fa fa-eraser"></i> ν•κ΄‘ν μ§€μ°κΈ°</div>
  <div class="citem" onclick="ctxVerseMemo()"><i class="fa fa-comment-dots"></i> μ£Όμ„ μ‘μ„±</div>
  <div class="citem" onclick="ctxNote()"><i class="fa fa-pen"></i> μƒ λ…ΈνΈ μ‘μ„±</div>
  <div class="citem" onclick="ctxLinkNote()"><i class="fa fa-link"></i> λ…ΈνΈ μ—°κ²°</div>
  <div class="citem" onclick="ctxDict()"><i class="fa fa-book"></i> μ‚¬μ „ λ³΄κΈ°</div>
  <div class="cdiv"></div>
  <div class="citem" onclick="addBookmark()"><i class="fa fa-bookmark"></i> λ¶λ§ν¬ μ¶”κ°€/μ κ±°</div>
  <div class="citem" onclick="ctxCopy()"><i class="fa fa-copy"></i> κµ¬μ  λ³µμ‚¬</div>
  <div class="citem" onclick="ctxCopyRef()"><i class="fa fa-quote-right"></i> μ°Έμ΅° ν•μ‹ λ³µμ‚¬</div>
  <div class="cdiv"></div>
  <div class="citem" onclick="ctxInsertLink()"><i class="fa fa-link"></i> λ…ΈνΈμ— κµ¬μ  λ§ν¬ μ‚½μ…</div>
</div>

<!-- β•β• MODALS β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β• -->
<div class="modal-bg" id="mFolder">
  <div class="modal-box">
    <div class="modal-title"><i class="fa fa-folder-plus"></i> μƒ ν΄λ” λ§λ“¤κΈ°</div>
    <input type="text" class="modal-inp" id="mFolderName" placeholder="ν΄λ” μ΄λ¦„ (μ: λ΅λ§μ„ μ—°κµ¬, λ§¤μΌ λ¬µμƒ...)">
    <div class="modal-btns">
      <button class="mbtn mbtn-cancel" onclick="closeM('mFolder')">μ·¨μ†</button>
      <button class="mbtn mbtn-ok" onclick="createFolder()">λ§λ“¤κΈ°</button>
    </div>
  </div>
</div>

<div class="modal-bg" id="mVerse">
  <div class="modal-box">
    <div class="modal-title"><i class="fa fa-bible"></i> μ„±κ²½ κµ¬μ  λ§ν¬ μ‚½μ…</div>
    <div style="display:flex;gap:6px;margin-bottom:10px">
      <select id="vlB" class="modal-inp" style="flex:1;margin:0" onchange="vlChBuild()"></select>
      <select id="vlC" class="modal-inp" style="width:80px;margin:0" onchange="vlPrev()"></select>
      <input type="number" id="vlV" class="modal-inp" style="width:68px;margin:0" placeholder="μ " min="1" max="200" oninput="vlPrev()">
    </div>
    <div style="font-size:12px;color:var(--text3);margin-bottom:12px">λ―Έλ¦¬λ³΄κΈ°: <span id="vlPrev" style="color:var(--gold);font-family:'JetBrains Mono',monospace"></span></div>
    <div class="modal-btns">
      <button class="mbtn mbtn-cancel" onclick="closeM('mVerse')">μ·¨μ†</button>
      <button class="mbtn mbtn-ok" onclick="confirmVL()">μ‚½μ…</button>
    </div>
  </div>
</div>

<div class="modal-bg" id="mNoteLink">
  <div class="modal-box">
    <div class="modal-title"><i class="fa fa-link"></i> λ…ΈνΈ λ§ν¬ μ‚½μ…</div>
    <input type="text" class="modal-inp" id="nlSearch" placeholder="λ…ΈνΈ μ λ© κ²€μƒ‰..." oninput="filterNoteLinks(this.value)">
    <div id="notePicker"></div>
    <div class="modal-btns">
      <button class="mbtn mbtn-cancel" onclick="closeM('mNoteLink')">μ·¨μ†</button>
    </div>
  </div>
</div>

<!-- Verse Tooltip -->
<div id="vtip"><div id="vtip-ref"></div><div id="vtip-txt"></div></div>
<!-- Toast -->
<div id="toast"></div>

<!-- β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•
     SCRIPTS (λ¨λ“ν™”λ JS)
β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β•β• -->

<!-- Firebase UI (μ „μ—­ ν•¨μ, λ¨λ“λ³΄λ‹¤ λ¨Όμ €) -->
<script src="js/firebase-ui.js"></script>

<!-- λ°μ΄ν„° (μ‘μ€ νμΌ, λ™κΈ° λ΅λ“) -->
<script src="data/books.js"></script>

<!-- μ½”μ–΄ λ¨λ“ (μμ΅΄μ„± μ—†μ, λ¨Όμ € λ΅λ“) -->
<script src="js/data-loader.js"></script>
<script src="js/state.js"></script>
<script src="js/theme.js"></script>
<script src="js/storage.js"></script>
<script src="js/ui-utils.js"></script>

<!-- μ„±κ²½ κ΄€λ ¨ -->
<script src="js/bible-renderer.js"></script>
<script src="js/bible-renderer-hl.js"></script>
<script src="js/book-nav.js"></script>
<script src="js/nav-picker.js"></script>
<script src="js/nav-picker-ui.js"></script>
<script src="js/nav-picker-render.js"></script>
<script src="js/nav-picker-actions.js"></script>
<script src="js/bible-tabs.js"></script>
<script src="js/bible-tabs-render.js"></script>

<!-- ν•μ΄λΌμ΄νΈ & μ  μ„ νƒ -->
<script src="js/highlight.js"></script>
<script src="js/highlight-picker.js"></script>
<script src="js/highlight-apply.js"></script>
<script src="js/highlight-memo.js"></script>
<script src="js/highlight-memo-data.js"></script>
<script src="js/highlight-memo-verse.js"></script>
<script src="js/highlight-memo-parse.js"></script>
<script src="js/highlight-memo-notelink.js"></script>
<script src="js/highlight-memo-search.js"></script>
<script src="js/highlight-memo-filter.js"></script>
<script src="js/highlight-memo-tags.js"></script>
<script src="js/highlight-memo-save.js"></script>
<script src="js/verse-select.js"></script>

<!-- μ£Όμ„ & μ‚¬μ „ -->
<script src="js/commentary-verse.js"></script>
<script src="js/commentary-chapter.js"></script>
<script src="js/commentary.js"></script>
<script src="js/strongs-ui.js"></script>
<script src="js/strongs-ui-def.js"></script>
<script src="js/strongs-ui-search.js"></script>

<!-- λ…ΈνΈ μ‹μ¤ν… -->
<script src="js/notes-editor.js"></script>
<script src="js/notes-editor-insert.js"></script>
<script src="js/notes-editor-inline.js"></script>
<script src="js/notes-manager.js"></script>
<script src="js/notes-manager-save.js"></script>
<script src="js/notes-manager-ui.js"></script>
<script src="js/notes-folders.js"></script>
<script src="js/notes-folders-ctx.js"></script>
<script src="js/notes-folders-crud.js"></script>
<script src="js/notes-links.js"></script>
<script src="js/notes-links-notelink.js"></script>
<script src="js/notes-links-embed.js"></script>
<script src="js/notes-links-url.js"></script>
<script src="js/notes-links-youtube.js"></script>
<script src="js/notes-links-file.js"></script>
<script src="js/notes-links-verse.js"></script>
<script src="js/notes-links-vtip.js"></script>

<!-- μ»¨ν…μ¤νΈ λ©”λ‰΄ & ν¨λ„ -->
<script src="js/context-menu.js"></script>
<script src="js/context-menu-notelink.js"></script>
<script src="js/context-menu-versememo.js"></script>
<script src="js/context-menu-actions.js"></script>
<script src="js/panels.js"></script>
<script src="js/panel-tabs.js"></script>
<script src="js/panel-tabs-sub.js"></script>
<script src="js/panel-nav.js"></script>
<script src="js/outline.js"></script>
<script src="js/outline-note.js"></script>
<script src="js/outline-note-ui.js"></script>
<script src="js/search.js"></script>
<script src="js/search-exec.js"></script>
<script src="js/search-quick.js"></script>
<script src="js/read-mode.js"></script>

<!-- μ΄κΈ°ν™” (λ°λ“μ‹ λ§μ§€λ§‰) -->
<script src="js/app-paste.js"></script>
<script src="js/app.js"></script>

</body>
</html>
